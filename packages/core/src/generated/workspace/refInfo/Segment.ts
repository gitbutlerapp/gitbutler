// This file was generated by [ts-rs](https://github.com/Aleph-Alpha/ts-rs). Do not edit this file manually.
import type { Branch } from '../../core/refMetadata/Branch';
import type { Commit } from '../Commit';
import type { PushStatus } from '../PushStatus';
import type { UpstreamCommit } from '../UpstreamCommit';
import type { BranchReference } from './BranchReference';
import type { RemoteTrackingReference } from './RemoteTrackingReference';

/**
 * A segment of a commit graph, representing a set of commits exclusively.
 */
export type Segment = {
	/**
	 *
	 * It is `None` if this branch is the top-most stack segment and the `ref_name` wasn't pointing to
	 * a commit anymore that was reached by our rev-walk.
	 * This can happen if the ref is deleted, or if it was advanced by other means.
	 * Alternatively, the naming would have been ambiguous.
	 * Finally, this is `None` of the original name can be found searching upwards, finding exactly one
	 * named segment.
	 */
	refName: BranchReference | null;
	/**
	 * The name of the remote tracking branch of this segment, if present, i.e. `refs/remotes/origin/main`.
	 * Its presence means that a remote is configured and that the stack content
	 */
	remoteTrackingRefName: RemoteTrackingReference | null;
	/**
	 * The portion of commits that can be reached from the tip of the *branch* downwards, so that they are unique
	 * for that stack segment and not included in any other stack or stack segment.
	 *
	 * The list could be empty for when this is a dedicated empty segment as insertion position of commits.
	 */
	commits: Array<Commit>;
	/**
	 * Commits that are reachable from the remote-tracking branch associated with this branch,
	 * but are not reachable from this branch or duplicated by a commit in it.
	 * Note that commits that are also similar to commits in `commits` are pruned, and not present here.
	 *
	 * Note that remote commits along with their remote tracking branch should always retain a shared history
	 * with the local tracking branch. If these diverge, we can represent this in data, but currently there is
	 * no derived value to make this visible explicitly.
	 */
	commitsOnRemote: Array<UpstreamCommit>;
	/**
	 * All commits *that are not workspace commits* reachable by (and including commits in) this segment.
	 * The list was created by walking all parents, not only the first parent.
	 * This means the segment needs fixing.
	 */
	commitsOutside: Array<Commit> | null;
	/**
	 * Read-only metadata with additional information about the branch naming the segment,
	 * or `None` if nothing was present.
	 */
	metadata: Branch | null;
	/**
	 * This is `true` a segment in a workspace if the entrypoint of [the traversal](Graph::from_commit_traversal())
	 * is this segment, and the surrounding workspace is provided for context.
	 *
	 * This means one will see the entire workspace, while knowing the focus is on one specific segment.
	 * *Note* that this segment can be listed in *multiple stacks* as it's reachable from multiple 'ahead' segments.
	 */
	isEntrypoint: boolean;
	/**
	 * A derived value to help the UI decide which functions to make available.
	 */
	pushStatus: PushStatus;
	/**
	 * This is always the `first()` commit in `commits` of the next stacksegment, or the first commit of
	 * the first ancestor segment.
	 * It can be imagined as the base upon which the segment is resting, or the connection point to the rest
	 * of the commit-graph along the first parent.
	 * It is `None` if the stack segment contains the first commit in the history, an orphan without ancestry,
	 * or if the history traversal was stopped early.
	 */
	base: string | null;
};
