name: Verify Commit Signatures
on:
  pull_request:
    types:
      - opened
      - synchronize
      - reopened
      - ready_for_review

jobs:
  verify-commit-signatures:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: read
    steps:
      - name: Check commits are signed and Verified
        uses: 1Password/check-signed-commits-action@ed2885f3ed2577a4f5d3c3fe895432a557d23d52 # v1.2.0
        with:
          comment: |
            This pull request contains commits that are not **Verified** on GitHub.

            GitButler requires signed commits for all pull requests. Please re-sign the commits and force-push your branch.

            If you need help setting up signing, start here:
            https://docs.github.com/en/authentication/managing-commit-signature-verification/about-commit-signature-verification
